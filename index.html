<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Building a maintainable plotting library</title>

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/simple.css">
    <link rel="stylesheet" href="css/custom.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/monokai.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <section>
                <h3>Building a maintainable plotting library</h3>
                <p>
                    <img data-src="img/logo.png" />
                </p>

                <div id="left">
                    <!-- Can put a logo or something here-->
                    <!-- <img data-src="img/logo-red-new.png" /> -->
                </div>
                <div id="right">
                    <p style="text-align: right" class="subtitle"><a href="https://colindcarroll.com/">Colin
                            Carroll</a></p>
                </div>
            </section>

            <section>
                <h3>Slides are online!</h3>
                <p><a
                        href="https://build_a_plotting_library.colindcarroll.com">build_a_plotting_library.colindcarroll.com</a>
                    <p>Code is also available <a href="TODO: THIS">here.</a>
                        <br>
                        <p>Many thanks to the Matplotlib team and contributors.</p>

            </section>

            <section>
                <h3>Set a stylish default</h3>
                <pre><code data-trim data-noescape>
import matplotlib.pyplot as plt

plt.plot(*np.random.randn(50, 2))
</code></pre>
                <p>
                    <img data-src="img/style1.png" />
                </p>
            </section>

            <section>
                <h3>Set a stylish default</h3>
                <pre><code data-trim data-noescape>
plt.rcParams.update({
    "axes.prop_cycle": plt.cycler(
        "color",
        ["#EE9041", "#459DB9", "#667B83"]),
})
plt.plot(*np.random.randn(50, 2))
</code></pre>
                <p>
                    <img data-src="img/style2.png" />
                </p>
            </section>

            <section>
                <h3>Set a stylish default</h3>
                <pre><code data-trim data-noescape>
plt.rcParams.update({
    "figure.figsize": [10.0, 3.0],
})
plt.plot(*np.random.randn(50, 2))
</code></pre>
                <p>
                    <img data-src="img/style3.png" />
                </p>
            </section>

            <section>
                <h3>Set a stylish default</h3>
                <pre><code data-trim data-noescape>
plt.rcParams.update({
    "lines.marker": "d",
})
plt.plot(*np.random.randn(50, 2))
</code></pre>
                <p>
                    <img data-src="img/style4.png" />
                </p>
            </section>

            <section>
                <h3>Set a stylish default</h3>
                <pre><code data-trim data-noescape>
plt.rcParams.update({
    "lines.linestyle": "",
})
plt.plot(*np.random.randn(50, 2))
</code></pre>
                <p>
                    <img data-src="img/style5.png" />
                </p>
            </section>

            <section>
                <h3>Set a stylish default</h3>
                <pre><code data-trim data-noescape>
plt.rcParams.update({
    "lines.markersize": 48.0,
})
plt.plot(*np.random.randn(50, 2))
</code></pre>
                <p>
                    <img data-src="img/style6.png" />
                </p>
            </section>

            <section>
                <h3>Set a stylish default</h3>
                <pre><code data-trim data-noescape>
plt.rcParams.update({
    "axes.spines.bottom": False,
    "axes.spines.top": False,
    "axes.spines.left": False,
    "axes.spines.right": False,
    "xtick.major.bottom": False,
    "ytick.major.left": False,
})
plt.plot(*np.random.randn(50, 2))
</code></pre>
                <p>
                    <img data-src="img/style7.png" />
                </p>
            </section>

            <section>
                <h3>Set a stylish default</h3>
                <pre><code data-trim data-noescape>
plt.rcParams.update({
    "lines.markeredgecolor": "black",
})
plt.plot(*np.random.randn(50, 2))
</code></pre>
                <p>
                    <img data-src="img/style8.png" />
                </p>
            </section>

            <section>
                <h3>Set a stylish default</h3>
                <pre><code data-trim data-noescape>
x = np.linspace(-2, 2)
plt.plot(x, np.cos(2 * x))
plt.plot(x, np.sin(2 * x))
plt.plot(x, -np.cos(2 * x))
</code></pre>
                <p>
                    <img data-src="img/style9.png" />
                </p>
            </section>

            <section>
                <h3>Save your styles</h3>
                <pre><code data-trim data-noescape>
from pathlib import Path
print(Path(matplotlib.get_configdir()) / "stylelib")
# Create file "my_style.mplstyle"
</code></pre>
                <pre><code data-trim data-noescape>
import matplotlib.pyplot as plt

plt.style.use("my_style")  # all set!
</code></pre>
            </section>

            <section>
                <h3>Build custom plots with Artists</h3>
                <p>
                    <img width=400 data-src="img/original.png" />
                    <img width=400 data-src="img/final.png" />
                </p>
            </section>

            <section data-background-image="img/original_color.png">
            </section>

            <section data-background-image="img/original.png">
            </section>

            <section data-background-image="img/mask.png">
            </section>

            <section data-background-image="img/pete_mask.png">
            </section>

            <section data-background-image="img/smooth_mask.png">
            </section>

            <section data-background-image="img/pete_smooth.png">
            </section>

            <section data-background-image="img/pete_thresh.png">
            </section>

            <section data-background-image="img/pete_zones.png">
            </section>

            <section data-background-image="img/pete_final_no_smooth.png">
            </section>

            <section data-background-image="img/pete_final_wide.png">
            </section>

            <section data-background-image="img/final.png">
            </section>

            <section data-background-image="img/final_color.png">
            </section>

            <section>
                <pre><code data-trim data-noescape>
fig, ax = plt.subplots(figsize=(10, 7))
lc = LineCollection(
    segments=[
        ((0, 1), (1, 1), (2, 1), (3, 1)),
        ((0, 1), (1, 2), (2, 3), (3, 4)),
        ((0, 0), (1, 2), (2, 4), (3, 9)),
    ],
)
ax.add_collection(lc)
ax.set_ylim(0, 9)
ax.set_xlim(0, 3)
</code></pre>
                <p>
                    <img height=350 data-src="img/lc1.png" />
                </p>
            </section>

            <section>
                <pre><code data-trim data-noescape>
...
lc = LineCollection(
    segments=...,
    colors=('red', 'green', 'blue'),
    linewidths=(4, 8, 12),
    linestyles=('dashed', 'dotted', 'solid')

)
...
</code></pre>
                <p>
                    <img height=400 data-src="img/lc2.png" />
                </p>
            </section>

            <section>
                <pre><code data-trim data-noescape>
...
lc = LineCollection(
    segments=[
        ((0, 0), (1, 2)),
        ((1, 2), (2, 4)),
        ((2, 4), (3, 9))
    ], ...
)
...
</code></pre>
                <p>
                    <img height=400 data-src="img/lc3.png" />
                </p>
            </section>

            <section>
                <h2>Getting the LineCollection working</h2>
                <pre><code data-trim data-noescape>
x = np.linspace(-2, 2)
y = x ** 2

points = np.vstack((x, y)).T
# array([[-2.        ,  4.        ],
#       [-1.91836735,  3.68013328],
#       [-1.83673469,  3.37359434],
#       [-1.75510204,  3.08038317],...
segments = list(zip(points[:-1], points[1:]))
</code></pre>
            </section>

            <section>
                <pre><code data-trim data-noescape>
fig, ax = plt.subplots()

lc = LineCollection(segments=segments)

ax.add_collection(lc)
ax.set_ylim(-0.2, 4)
ax.set_xlim(-2, 2)
</code></pre>
                <p>
                    <img height=400 data-src="img/lc4.png" />
                </p>
            </section>

            <section>
                <pre><code data-trim data-noescape>
linewidths = 30 * np.abs(np.sin(10 * x))
...

lc = LineCollection(
    segments=segments,
    linewidths=linewidths
)
...
</code></pre>
                <p>
                    <img height=400 data-src="img/lc5.png" />
                </p>
            </section>

            <section>
                <pre><code data-trim data-noescape>
cmap = plt.get_cmap('viridis')
...

lc = LineCollection(
    segments=segments,
    linewidths=linewidths,
    colors=cmap(np.abs(np.sin(5 * x))),
)
...
</code></pre>
                <p>
                    <img height=400 data-src="img/lc6.png" />
                </p>
            </section>




        </div>
    </div>

    <script src="js/reveal.js"></script>

    <script>
        // More info about config & dependencies:
        // - https://github.com/hakimel/reveal.js#configuration
        // - https://github.com/hakimel/reveal.js#dependencies
        Reveal.initialize({
            dependencies: [{
                    src: 'plugin/markdown/marked.js'
                },
                {
                    src: 'plugin/markdown/markdown.js'
                },
                {
                    src: 'plugin/notes/notes.js',
                    async: true
                },
                {
                    src: 'plugin/highlight/highlight.js',
                    async: true
                },
                {
                    src: 'plugin/math/math.js',
                    async: true
                },
            ],
            history: true,
            math: {
                mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
                config: 'TeX-AMS_HTML-full' // See http://docs.mathjax.org/en/latest/config-files.html
            },
        });
    </script>
</body>

</html>
